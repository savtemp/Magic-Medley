import{_ as A,o,a as c,b as s,d as g,t as v,E as V,g as q,F as P,f as E,h as Q,i as m,A as r,j as u,P as h,n as T,G as j,H as L,v as H,r as D,u as z,e as G,I as O,l as U,z as W,B as Y}from"./index.9f11d40c.js";const C={setup(){const _=z(),i=G(),p="Swamp";async function t(){try{await u.setActiveDeck(i.params.deckId),await O.getDeckCards(i.params.deckId),f()}catch(e){U.log(e),h.error("[setting active deck]",e)}}function f(){let e=[...r.deckCards];for(let a=0;a<e.length;a++){const l=e[a];l.quantity=1;for(let n=a+1;n<e.length;n++){const k=e[n];l.cardId==k.cardId&&(l.quantity++,e.splice(n,1),n--)}}r.duplicates=e}return Q(()=>{t()}),{lands:p,duplicates:m(()=>r.duplicates),activeDeck:m(()=>r.activeDeck),activeRater:m(()=>{var e;return(e=r.activeDeck)==null?void 0:e.rating.find(a=>a.creatorId==r.account.id)}),deckCards:m(()=>r.deckCards),cover:m(()=>{var e;return`url(${(e=r.activeDeck)==null?void 0:e.picture})`}),deckLandCards:m(()=>{var e;return(e=r.deckCards)==null?void 0:e.filter(a=>a.card.name==p)}),FindCardsMissingFromMyCollectionInDeck(){let e=this.duplicates.map(a=>{let l=r.collection.find(n=>n.name==a.card.name);if(l){let n={...l};if(n.missingQty=a.quantity-l.quantity,n.missingQty>0)return n}else{let n={...a};return n.missingQty=a.quantity,n}});r.missingCards=e},async rateDeck(e){try{const a=this.activeDeck.accountId,l=this.activeDeck.id;await u.rateDeck({value:e},l,a)}catch(a){h.error(a)}},async cloneDeck(){try{await u.cloneDeck(this.activeDeck.id)}catch(e){h.error(e)}},async gotToProfile(){_.push({name:"Profile",params:{profileId:r.activeDeck.profile.id}})}}},components:{DeckCard:T,DeckDetailsCard:j,ShoppingCartModal:L}},B=()=>{H(_=>({"1d5da2bf":_.cover}))},N=C.setup;C.setup=N?(_,i)=>(B(),N(_,i)):B;const J=C,y=_=>(W("data-v-4311b2f9"),_=_(),Y(),_),K={class:"container-fluid pageBg collectionPageViewHeight"},X={class:"row"},Z={key:0,class:"row my-3"},$={class:"col-6 col-md-2 align-items-center"},tt=["src"],et={class:""},st={class:"col-12 col-md-10"},it={class:"col-12 col-md-8"},at={class:"row"},ot={key:0},ct=y(()=>s("span",{class:"mdi mdi-star mdi-24px"},null,-1)),nt={key:1},dt=V(" Deck Rating: UNRATED"),rt=y(()=>s("span",{class:"mdi mdi-star mdi-24px"},null,-1)),lt=[dt,rt],_t={class:"row"},mt={class:"col-3 m-1 p-0"},kt={key:0},vt={key:1},pt={key:0,class:"mdi mdi-star-outline mdi-36px"},gt={key:1,class:"mdi mdi-star mdi-36px"},ut={key:0,class:"mdi mdi-star mdi-36px"},ht={key:1,class:"mdi mdi-star-outline mdi-36px"},Dt={key:0,class:"mdi mdi-star mdi-36px text-warning"},Ct={key:1,class:"mdi mdi-star-outline mdi-36px"},yt={key:0,class:"mdi mdi-star mdi-36px"},ft={key:1,class:"mdi mdi-star-outline mdi-36px"},xt={key:0,class:"mdi mdi-star mdi-36px"},bt={key:1,class:"mdi mdi-star-outline mdi-36px"},wt=y(()=>s("div",{class:"col-3"},null,-1)),It={class:"container"},Rt={class:"row"},St={class:""},Mt={class:"card-grid"};function Ft(_,i,p,t,f,e){var k,x,b,w,I,R,S,M,F;const a=D("ClearNavBar"),l=D("DeckDetailsCard"),n=D("ShoppingCartModal");return o(),c(P,null,[s("section",K,[s("header",X,[g(a)]),t.activeDeck.id?(o(),c("div",Z,[s("div",$,[s("img",{onClick:i[0]||(i[0]=d=>t.gotToProfile()),type:"button",class:"profile-img",src:(k=t.activeDeck.profile)==null?void 0:k.picture,alt:"profile picture"},null,8,tt),s("h4",et,v((x=t.activeDeck.profile)==null?void 0:x.name),1)]),s("div",st,[s("h1",null,v(t.activeDeck.name),1),s("div",it,v(t.activeDeck.description),1),s("div",at,[(b=t.activeDeck)!=null&&b.avgRating?(o(),c("h4",ot,[V(" Deck Rating: "+v((((w=t.activeDeck)==null?void 0:w.avgRating)/((I=t.activeDeck.rating)==null?void 0:I.length)).toFixed(1))+"/5",1),ct])):(o(),c("h4",nt,lt))]),s("div",_t,[s("div",mt,[t.activeRater?(o(),c("h5",kt,"You rated this deck:")):(o(),c("h5",vt,"Rate this deck:")),s("button",{onClick:i[1]||(i[1]=d=>t.rateDeck(1)),class:"btn m-0 p-0 text-warning"},[t.activeRater?(o(),c("i",gt)):(o(),c("i",pt))]),s("button",{onClick:i[2]||(i[2]=d=>t.rateDeck(2)),class:"btn m-0 p-0 text-warning"},[((R=t.activeRater)==null?void 0:R.value)>=2?(o(),c("i",ut)):(o(),c("i",ht))]),s("button",{onClick:i[3]||(i[3]=d=>t.rateDeck(3)),class:"btn m-0 p-0 text-warning"},[((S=t.activeRater)==null?void 0:S.value)>=3?(o(),c("i",Dt)):(o(),c("i",Ct))]),s("button",{onClick:i[4]||(i[4]=d=>t.rateDeck(4)),class:"btn m-0 p-0 text-warning"},[((M=t.activeRater)==null?void 0:M.value)>=4?(o(),c("i",yt)):(o(),c("i",ft))]),s("button",{onClick:i[5]||(i[5]=d=>t.rateDeck(5)),class:"btn m-0 p-0 text-warning"},[((F=t.activeRater)==null?void 0:F.value)>=5?(o(),c("i",xt)):(o(),c("i",bt))])]),wt,s("button",{class:"glass btn col-2 m-1",onClick:i[6]||(i[6]=(...d)=>t.cloneDeck&&t.cloneDeck(...d))}," Copy Deck to My Collection "),s("button",{class:"glass btn btn-outline col-2 m-1",type:"button",onClick:i[7]||(i[7]=(...d)=>t.FindCardsMissingFromMyCollectionInDeck&&t.FindCardsMissingFromMyCollectionInDeck(...d)),"data-bs-toggle":"offcanvas","data-bs-target":"#shopping-cart-modal","aria-controls":"offcanvasExample"}," Compare to my collection ")])])])):q("",!0),s("div",It,[s("div",Rt,[s("div",St,[s("div",Mt,[(o(!0),c(P,null,E(t.deckCards,d=>(o(),c("div",{class:"grid-item",key:d.id},[g(l,{card:d},null,8,["card"])]))),128))])])])])]),g(n)],64)}const Bt=A(J,[["render",Ft],["__scopeId","data-v-4311b2f9"]]);export{Bt as default};
